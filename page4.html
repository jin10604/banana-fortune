<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>page4</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="wrapper">
  <div class="stage page4">
    <img class="bg" src="image/page4.png" alt="background">
    <div id="fortuneText"></div>
  </div>
</div>

<audio id="bgm" src="sound/bgm.mp3" loop preload="auto"></audio>

<script>
  const bgm = document.getElementById("bgm");
  bgm.volume = 0.3;
  if (localStorage.getItem("bgmPlaying") === "true") bgm.play();

  const positive = [
    "뜻밖의 행운이 찾아옵니다.",
    "기다리던 소식을 듣게 됩니다.",
    "당신을 도와줄 사람이 나타납니다.",
    "작은 선택이 큰 기회를 만듭니다.",
    "오래된 고민이 풀립니다.",
    "노력한 만큼 보상이 따릅니다.",
    "당신의 매력이 빛나는 하루입니다.",
    "기쁜 만남이 기다리고 있습니다.",
    "마음이 편안해지는 일이 생깁니다."
  ];

  const negative = [
    "사소한 말다툼을 조심하세요.",
    "기대했던 일이 지연될 수 있습니다.",
    "오늘은 무리하지 않는 것이 좋습니다.",
    "작은 실수가 반복될 수 있습니다.",
    "감정 조절이 필요합니다.",
    "주변 상황을 다시 살펴보세요.",
    "예상치 못한 변수가 생깁니다.",
    "결정을 미루는 편이 좋겠습니다.",
    "집중력이 흐트러질 수 있습니다."
  ];

  function pickUnique(arr, used) {
    let result;
    do {
      result = arr[Math.floor(Math.random() * arr.length)];
    } while (used.includes(result));
    used.push(result);
    return result;
  }

  const used = [];

  const type1 = Math.random() < 0.5 ? "pos" : "neg";
  const type2 = Math.random() < 0.5 ? "pos" : "neg";

  const first  = type1 === "pos" ? pickUnique(positive, used) : pickUnique(negative, used);
  const second = type2 === "pos" ? pickUnique(positive, used) : pickUnique(negative, used);

  const connector = (type1 === type2) ? " 또한 " : " 그러나 ";

  document.getElementById("fortuneText").innerText = first + connector + second;
</script>

</body>
</html>
