<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Banana Fortune - Pick 2</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="wrapper">
  <div class="stage">

    <img class="bg" src="image/page3_bg.png" alt="background">

    <div class="banana-grid">
      <img class="banana" data-type="good" src="image/banana_1.png">
      <img class="banana" data-type="bad"  src="image/banana_2.png">
      <img class="banana" data-type="good" src="image/banana_3.png">
      <img class="banana" data-type="bad"  src="image/banana_4.png">
      <img class="banana" data-type="good" src="image/banana_5.png">
      <img class="banana" data-type="bad"  src="image/banana_6.png">
      <img class="banana" data-type="good" src="image/banana_7.png">
      <img class="banana" data-type="bad"  src="image/banana_8.png">
      <img class="banana" data-type="good" src="image/banana_9.png">
    </div>

  </div>
</div>

<audio id="clickSound" src="sound/click.mp3"></audio>
<audio id="bgm" src="sound/bgm.mp3" loop></audio>

<script>
const bananas = document.querySelectorAll(".banana");
const clickSound = document.getElementById("clickSound");
const bgm = document.getElementById("bgm");

if(localStorage.getItem("bgmPlaying")==="true"){
  bgm.volume = 0.6;
  bgm.play();
}

let selected = [];

bananas.forEach((banana, index)=>{
  banana.addEventListener("click", ()=>{
    if(selected.length >= 2) return;

    clickSound.currentTime = 0;
    clickSound.play();

    banana.classList.add("selected");
    selected.push(banana.dataset.type);

    if(selected.length === 2){
      localStorage.setItem("pick1", selected[0]);
      localStorage.setItem("pick2", selected[1]);
      setTimeout(()=> location.href="page4.html", 400);
    }
  });
});
</script>

</body>
</html>
